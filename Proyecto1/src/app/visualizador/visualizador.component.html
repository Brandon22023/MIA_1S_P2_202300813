<div class="visualizador-container">
  <div class="header">
    <h2>Explorador de Archivos</h2>
  </div>

  <div class="content">
    <div class="sidebar">
      <h4>Carpetas</h4>
      <ul>
        <li>📂 Documentos</li>
        <li>📂 Imágenes</li>
        <li>📂 Descargas</li>
        <li>📂 Música</li>
      </ul>
    </div>

    <div class="main" *ngIf="!selectedDisk">
      <h4>Discos</h4>
      <div class="file-grid">
        <div class="file-item" *ngFor="let disk of disks" (click)="selectDisk(disk)">
          <span>💾</span>
          <p>{{ disk.name }}</p>
          <div class="disk-info">
            <h5>💡 Información del Disco</h5>
            <div class="info-item">
              <span>🔖</span>
              <p>Nombre: <strong>{{ disk.name }}</strong></p>
            </div>
            <div class="info-item">
              <span>📏</span>
              <p>Tamaño: <strong>{{ disk.size }}</strong></p>
            </div>
            <div class="info-item">
              <span>⚙️</span>
              <p>Fit: <strong>{{ disk.fit }}</strong></p>
            </div>
            <div class="info-item">
              <span>🗄️</span>
              <p>Particiones Montadas: <strong>{{ disk.mounted_partitions }}</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Vista de particiones -->
    <div class="main" *ngIf="selectedDisk && !selectedpart">
      <h4>Particiones del Disco: {{ selectedDisk }}</h4>
      <div *ngIf="partitions.length === 0" class="no-partitions">
        <p>No existen particiones para dicho disco</p>
      </div>
      <div class="file-grid" *ngIf="partitions.length > 0">
        <div 
          class="file-item" 
          *ngFor="let partition of partitions" 
          [ngClass]="{'mounted': partition.state === 'Montada', 'not-mounted': partition.state !== 'Montada'}"
          (click)="selectpartitions(partition)"
          >
          <span>🖴</span>
          <p>{{ partition.name }}</p>
          <div class="partition-info">
            <h5>💡 Información de la Partición</h5>
            <div class="info-item">
              <span>🏷️</span>
              <p>Nombre: <strong>{{ partition.name }}</strong></p>
            </div>
            <div class="info-item">
              <span>📏</span>
              <p>Tamaño: <strong>{{ partition.size }}</strong></p>
            </div>
            <div class="info-item">
              <span>🗃️</span>
              <p>Tipo: <strong>{{ partition.type }}</strong></p>
            </div>
            <div class="info-item">
              <span>🧩</span>
              <p>Fit: <strong>{{ partition.fit }}</strong></p>
            </div>
            <div class="info-item">
              <span>{{ partition.state === 'Montada' ? '✅' : '❌' }}</span>
              <p>Estado: <strong>{{ partition.state }}</strong></p>
            </div>
            <div class="info-item">
              <span>🆔</span>
              <p>ID: <strong>{{ partition.id }}</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Vista de carpetas -->
    <div class="main carpetas-view" *ngIf="selectedpart">
      <div class="ruta-bar">
        <button class="btn btn-back" (click)="goBack()">🔙 Atrás</button>
        <span class="ruta">{{ ruta.join(' / ') || selectedpart }}</span>
      </div>
      <h4>Carpetas en la partición: {{ selectedpart }}</h4>
      <div *ngIf="getCurrentFolders().length === 0" class="no-folders">
        <p>No existen carpetas en este nivel</p>
      </div>
      <div class="carpetas-grid" *ngIf="getCurrentFolders().length > 0">
        <div
          class="carpeta-item"
          *ngFor="let carpeta of getCurrentFolders()"
          (click)="openFolder(carpeta)"
        >
          <span>📁</span>
          <p>{{ carpeta.path.split('/').pop() }}</p>
    
          <!-- Información adicional de la carpeta -->
          <div class="folder-info">
            <h5>💡 Información de la Carpeta</h5>
            <div class="info-item">
              <span>📂</span>
              <p>Nombre: <strong>{{ carpeta.path.split('/').pop() }}</strong></p>
            </div>
            <div class="info-item">
              <span>🆔</span>
              <p>ID: <strong>{{ carpeta.id }}</strong></p>
            </div>
            <div class="info-item">
              <span>🔒</span>
              <p>Permisos: <strong>{{ carpeta.permissions }}</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botón "Volver" siempre visible -->
  <div class="footer">
    <button class="btn btn-secondary" (click)="volver()">Volver</button>
  </div>
</div>